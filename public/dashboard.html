<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pro User Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --bg: #f8fafc;
  --sidebar-bg: #ffffff;
  --card-bg: #ffffff;
  --primary: #4f46e5;
  --primary-hover: #4338ca;
  --text-main: #0f172a;
  --text-muted: #64748b;
  --border: #e2e8f0;
  --danger: #ef4444;
  --danger-bg: #fee2e2;
  --success: #10b981;
  --success-bg: #d1fae5;
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --sidebar-width: 260px;
}

[data-theme="dark"] {
  --bg: #0f172a;
  --sidebar-bg: #1e293b;
  --card-bg: #1e293b;
  --text-main: #f1f5f9;
  --text-muted: #94a3b8;
  --border: #334155;
  --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
  --danger-bg: #450a0a;
  --success-bg: #064e3b;
}

* { box-sizing: border-box; font-family: 'Inter', system-ui, sans-serif; transition: background-color 0.2s, border-color 0.2s, color 0.2s; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--text-main);
  height: 100vh;
  display: flex;
  overflow: hidden; /* Prevent body scroll, handle in main */
}

/* --- Layout: Sidebar --- */
.sidebar {
  width: var(--sidebar-width);
  background: var(--sidebar-bg);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  height: 100%;
  position: fixed;
  left: 0; top: 0;
  z-index: 50;
  transition: transform 0.3s ease;
}

.brand {
  padding: 24px;
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--primary);
  display: flex;
  align-items: center;
  gap: 10px;
}

.nav-menu {
  list-style: none;
  padding: 0 12px;
  margin: 0;
  flex: 1;
}

.nav-item {
  margin-bottom: 4px;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-radius: 8px;
  color: var(--text-muted);
  text-decoration: none;
  cursor: pointer;
  font-weight: 500;
}

.nav-link:hover { background: var(--bg); color: var(--text-main); }
.nav-link.active { background: #eef2ff; color: var(--primary); }
[data-theme="dark"] .nav-link.active { background: rgba(79, 70, 229, 0.1); }

.sidebar-footer {
  padding: 20px;
  border-top: 1px solid var(--border);
}

/* --- Layout: Main Content --- */
.main-content {
  flex: 1;
  margin-left: var(--sidebar-width);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow-y: auto; /* Scroll inside main */
}

.top-bar {
  position: sticky; top: 0;
  background: var(--bg);
  padding: 16px 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 40;
  backdrop-filter: blur(8px);
  background: rgba(var(--bg), 0.8);
}

.menu-toggle { display: none; font-size: 1.5rem; cursor: pointer; color: var(--text-main); }

.top-actions { display: flex; align-items: center; gap: 16px; }

/* Notification Dropdown */
.notif-wrapper { position: relative; }
.notif-badge {
  position: absolute; top: 0; right: 0;
  width: 8px; height: 8px; background: var(--danger);
  border-radius: 50%;
}
.dropdown {
  position: absolute; right: 0; top: 120%;
  width: 300px;
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  display: none;
  flex-direction: column;
  overflow: hidden;
}
.dropdown.show { display: flex; }
.dropdown-header { padding: 12px 16px; font-weight: 600; border-bottom: 1px solid var(--border); font-size: 0.9rem;}
.dropdown-item { padding: 12px 16px; border-bottom: 1px solid var(--border); font-size: 0.85rem; color: var(--text-muted); cursor: pointer; }
.dropdown-item:hover { background: var(--bg); }
.dropdown-item:last-child { border-bottom: none; }

/* Grid Systems */
.content-wrapper { padding: 20px 32px 40px; }

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

.dashboard-grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 24px;
}

/* Cards */
.card {
  background: var(--card-bg);
  border-radius: 16px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  padding: 24px;
  position: relative;
}
.stat-card { display: flex; align-items: center; justify-content: space-between; }
.stat-val { font-size: 1.8rem; font-weight: 700; margin: 4px 0 0; }
.stat-label { font-size: 0.85rem; color: var(--text-muted); font-weight: 500; }
.stat-icon {
  width: 48px; height: 48px;
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}
.card-header h3 { margin: 0; font-size: 1.1rem; }

/* Tabs Logic */
.view-section { display: none; animation: fadeIn 0.3s ease; }
.view-section.active { display: block; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Profile Elements (From original) */
.profile-header { display: flex; gap: 24px; align-items: center; margin-bottom: 24px; }
.avatar-large {
  width: 80px; height: 80px; border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), #818cf8);
  color: white; display: flex; align-items: center; justify-content: center;
  font-size: 2rem; font-weight: 700;
}

/* Forms & Buttons */
label { display: block; font-size: 0.85rem; margin-bottom: 6px; color: var(--text-muted); }
input {
  width: 100%; padding: 10px 14px; border-radius: 8px;
  border: 1px solid var(--border); background: var(--bg);
  color: var(--text-main); outline: none; margin-bottom: 16px;
}
input:focus { border-color: var(--primary); }
button {
  border: none; border-radius: 8px; padding: 10px 16px;
  font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; gap: 6px;
}
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: var(--primary-hover); }
.btn-danger { background: var(--danger-bg); color: var(--danger); }
.btn-icon { padding: 8px; border-radius: 50%; background: transparent; color: var(--text-muted); font-size: 1.2rem; }
.btn-icon:hover { background: var(--border); color: var(--text-main); }

/* Activity List */
.activity-item { display: flex; gap: 12px; padding: 12px 0; border-bottom: 1px dashed var(--border); }
.activity-item:last-child { border-bottom: none; }
.activity-icon { width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; background: var(--bg); color: var(--primary); }

/* Responsive */
@media (max-width: 1024px) {
  .dashboard-grid { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .sidebar { transform: translateX(-100%); }
  .sidebar.open { transform: translateX(0); box-shadow: 10px 0 20px rgba(0,0,0,0.1); }
  .main-content { margin-left: 0; }
  .menu-toggle { display: block; }
  .content-wrapper { padding: 20px; }
}

/* Skeleton & Utilities */
.skeleton { background: linear-gradient(90deg, var(--bg) 25%, var(--border) 50%, var(--bg) 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: 6px; height: 100%; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

.badge-success { background: var(--success-bg); color: var(--success); padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; }

/* Toast */
.toast {
  position: fixed; bottom: 24px; right: 24px;
  background: var(--card-bg); border-left: 4px solid var(--primary);
  padding: 16px 20px; border-radius: 8px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  transform: translateY(100px); transition: transform 0.3s;
  z-index: 100; display: flex; align-items: center; gap: 12px;
}
.toast.active { transform: translateY(0); }
</style>
</head>

<body>

<aside class="sidebar" id="sidebar">
  <div class="brand">
    <i class="ri-bubble-chart-fill"></i> NexusDash
  </div>
  
  <ul class="nav-menu">
    <li class="nav-item">
      <a class="nav-link active" onclick="switchTab('overview', this)">
        <i class="ri-dashboard-line"></i> Overview
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" onclick="switchTab('settings', this)">
        <i class="ri-user-settings-line"></i> Profile & Settings
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#" onclick="showToast('Feature coming soon')">
        <i class="ri-file-list-3-line"></i> Reports
      </a>
    </li>
  </ul>

  <div class="sidebar-footer">
    <button class="btn-danger" style="width: 100%; justify-content: center;" onclick="logout()">
      <i class="ri-logout-box-r-line"></i> Logout
    </button>
  </div>
</aside>

<main class="main-content">
  <div class="top-bar">
    <div style="display: flex; align-items: center; gap: 16px;">
      <i class="ri-menu-2-line menu-toggle" onclick="toggleSidebar()"></i>
      <h2 id="page-title" style="margin: 0; font-size: 1.25rem;">Overview</h2>
    </div>

    <div class="top-actions">
      <button class="btn-icon" onclick="toggleTheme()" title="Toggle Theme"><i class="ri-moon-line"></i></button>
      
      <div class="notif-wrapper">
        <button class="btn-icon" onclick="toggleNotif()"><i class="ri-notification-3-line"></i></button>
        <span class="notif-badge"></span>
        <div class="dropdown" id="notif-dropdown">
          <div class="dropdown-header">Notifications</div>
          <div class="dropdown-item">
            <div style="font-weight: 500;">System Update</div>
            <div style="font-size: 0.75rem;">Dashboard v2.0 is live</div>
          </div>
          <div class="dropdown-item">
            <div style="font-weight: 500;">New Login</div>
            <div style="font-size: 0.75rem;">Detected from Chrome/Windows</div>
          </div>
        </div>
      </div>

      <div class="avatar-small" id="header-avatar" style="width: 32px; height: 32px; background: var(--primary); border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">U</div>
    </div>
  </div>

  <div class="content-wrapper">
    
    <div id="loading-ui" style="display: block;">
      <div class="stats-grid">
        <div class="card" style="height: 120px;"><div class="skeleton"></div></div>
        <div class="card" style="height: 120px;"><div class="skeleton"></div></div>
        <div class="card" style="height: 120px;"><div class="skeleton"></div></div>
      </div>
      <div class="card" style="height: 300px;"><div class="skeleton"></div></div>
    </div>

    <div id="view-overview" class="view-section">
      
      <div class="stats-grid">
        <div class="card stat-card">
          <div>
            <div class="stat-label">Total Views</div>
            <div class="stat-val">12,450</div>
            <div class="badge-success" style="margin-top: 5px; display: inline-block;">+12%</div>
          </div>
          <div class="stat-icon" style="background: #e0f2fe; color: #0284c7;"><i class="ri-eye-line"></i></div>
        </div>
        <div class="card stat-card">
          <div>
            <div class="stat-label">Active Projects</div>
            <div class="stat-val">7</div>
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 5px;">2 pending review</div>
          </div>
          <div class="stat-icon" style="background: #f3e8ff; color: #9333ea;"><i class="ri-stack-line"></i></div>
        </div>
        <div class="card stat-card">
          <div>
            <div class="stat-label">Storage Used</div>
            <div class="stat-val">85%</div>
            <div style="height: 4px; background: var(--border); width: 100px; margin-top: 10px; border-radius: 2px;">
              <div style="height: 100%; background: var(--primary); width: 85%; border-radius: 2px;"></div>
            </div>
          </div>
          <div class="stat-icon" style="background: #ffedd5; color: #ea580c;"><i class="ri-hard-drive-2-line"></i></div>
        </div>
      </div>

      <div class="dashboard-grid">
        <div class="card">
          <div class="card-header">
            <h3><i class="ri-bar-chart-grouped-line"></i> Traffic Analytics</h3>
            <select style="width: auto; padding: 4px 8px; font-size: 0.8rem; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text-main);">
              <option>Last 7 Days</option>
              <option>Last Month</option>
            </select>
          </div>
          <div style="height: 250px; position: relative;">
            <canvas id="trafficChart"></canvas>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3><i class="ri-history-line"></i> Activity Log</h3>
          </div>
          <ul class="activity-list" id="ui-activity">
            </ul>
        </div>
      </div>
    </div>

    <div id="view-settings" class="view-section">
      <div class="card" style="max-width: 800px; margin: 0 auto;">
        <div class="profile-header">
          <div class="avatar-large" id="ui-avatar">U</div>
          <div>
            <h2 id="ui-name-display" style="margin: 0; font-size: 1.5rem;">User Name</h2>
            <div style="color: var(--text-muted);">Full Stack Developer</div>
            <div style="margin-top: 8px; display: flex; gap: 8px;">
               <span class="badge-success">Pro Plan</span>
               <span style="font-size: 0.8rem; color: var(--text-muted); display: flex; align-items: center;"><i class="ri-map-pin-line"></i> New York, USA</span>
            </div>
          </div>
        </div>

        <hr style="border: 0; border-top: 1px solid var(--border); margin: 24px 0;">
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
          <div>
            <label>Full Name</label>
            <input id="inp-name" type="text">
          </div>
          <div>
            <label>Email Address</label>
            <input id="inp-email" type="email" disabled>
          </div>
          <div>
            <label>Phone</label>
            <input type="text" placeholder="+1 (555) 000-0000">
          </div>
          <div>
            <label>Company</label>
            <input type="text" placeholder="Acme Inc.">
          </div>
        </div>

        <div style="margin-top: 20px; display: flex; justify-content: flex-end;">
          <button class="btn-primary" onclick="saveProfile()"><i class="ri-save-line"></i> Save Changes</button>
        </div>

        <div style="margin-top: 40px; border: 1px solid var(--danger-bg); background: rgba(254, 226, 226, 0.2); padding: 20px; border-radius: 8px;">
          <h4 style="color: var(--danger); margin: 0 0 10px;">Danger Zone</h4>
          <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 15px;">Deleting your account is permanent. All data will be wiped.</p>
          <button class="btn-danger" onclick="confirmDelete()"><i class="ri-delete-bin-line"></i> Delete Account</button>
        </div>
      </div>
    </div>

  </div>
</main>

<div id="toast" class="toast">
  <i class="ri-notification-badge-line" style="font-size: 1.2rem;"></i>
  <span id="toast-msg">Notification</span>
</div>

<script>
// --- Chart Logic ---
let myChart;

function initChart(isDark) {
  const ctx = document.getElementById('trafficChart').getContext('2d');
  const color = isDark ? '#818cf8' : '#4f46e5';
  const gridColor = isDark ? '#334155' : '#e2e8f0';
  const textColor = isDark ? '#94a3b8' : '#64748b';

  if (myChart) myChart.destroy();

  myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
      datasets: [{
        label: 'Visitors',
        data: [65, 59, 80, 81, 56, 120, 100],
        borderColor: color,
        backgroundColor: color + '20', // Add transparency
        fill: true,
        tension: 0.4,
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        y: { 
          beginAtZero: true, 
          grid: { color: gridColor, borderDash: [5, 5] },
          ticks: { color: textColor }
        },
        x: { 
          grid: { display: false },
          ticks: { color: textColor }
        }
      }
    }
  });
}

// --- UI Logic ---
const sidebar = document.getElementById('sidebar');

function toggleSidebar() {
  sidebar.classList.toggle('open');
}

// Close sidebar when clicking outside on mobile
document.addEventListener('click', (e) => {
  if (window.innerWidth <= 768 && 
      !sidebar.contains(e.target) && 
      !e.target.classList.contains('menu-toggle')) {
    sidebar.classList.remove('open');
  }
});

function toggleNotif() {
  document.getElementById('notif-dropdown').classList.toggle('show');
}

function switchTab(tabId, navEl) {
  // Update Nav
  if(navEl) {
    document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
    navEl.classList.add('active');
  }

  // Update View
  document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
  document.getElementById(`view-${tabId}`).classList.add('active');
  
  // Update Title
  const titles = { overview: 'Overview', settings: 'Profile & Settings' };
  document.getElementById('page-title').textContent = titles[tabId];

  // Close sidebar on mobile on selection
  if(window.innerWidth <= 768) sidebar.classList.remove('open');
}

function toggleTheme() {
  const theme = document.documentElement.dataset.theme === "dark" ? "" : "dark";
  document.documentElement.dataset.theme = theme;
  localStorage.setItem("theme", theme);
  const btnIcon = document.querySelector('.top-actions .btn-icon i');
  btnIcon.className = theme === 'dark' ? 'ri-sun-line' : 'ri-moon-line';
  
  // Re-render chart with new colors
  initChart(theme === 'dark');
}

function showToast(msg, type = "success") {
  const toastEl = document.getElementById("toast");
  document.getElementById("toast-msg").textContent = msg;
  toastEl.className = `toast active ${type}`;
  toastEl.querySelector('i').className = type === 'success' ? 'ri-checkbox-circle-line' : 'ri-error-warning-line';
  setTimeout(() => toastEl.classList.remove("active"), 3000);
}

// --- Data Simulation ---
async function loadDashboard() {
  // Show Skeleton
  document.getElementById("loading-ui").style.display = "block";
  document.getElementById("view-overview").classList.remove('active');

  // Simulate API Call
  setTimeout(() => {
    const user = {
      name: "Alex Developer",
      email: "alex@example.com",
      created_at: "2023-01-15"
    };
    
    // Populate Data
    document.getElementById("ui-avatar").textContent = user.name[0];
    document.getElementById("header-avatar").textContent = user.name[0];
    document.getElementById("ui-name-display").textContent = user.name;
    document.getElementById("inp-name").value = user.name;
    document.getElementById("inp-email").value = user.email;

    // Populate Activity
    document.getElementById("ui-activity").innerHTML = `
      <li class="activity-item">
          <div class="activity-icon" style="background: #e0f2fe; color: #0284c7;"><i class="ri-login-circle-line"></i></div>
          <div style="font-size:0.9rem;"><strong>Login detected</strong> from Chrome (Win10)<div style="font-size:0.75rem; color:var(--text-muted);">Just now</div></div>
      </li>
      <li class="activity-item">
          <div class="activity-icon" style="background: #dcfce7; color: #16a34a;"><i class="ri-file-upload-line"></i></div>
          <div style="font-size:0.9rem;"><strong>Project deployed</strong> to production<div style="font-size:0.75rem; color:var(--text-muted);">2 hours ago</div></div>
      </li>
    `;

    // Hide Skeleton, Show Content
    document.getElementById("loading-ui").style.display = "none";
    document.getElementById("view-overview").classList.add("active");
    
    // Initialize Chart
    const isDark = document.documentElement.dataset.theme === "dark";
    initChart(isDark);

  }, 800);
}

// Actions
function saveProfile() {
  const btn = document.querySelector('#view-settings .btn-primary');
  const original = btn.innerHTML;
  btn.innerHTML = `<i class="ri-loader-4-line ri-spin"></i> Saving...`;
  setTimeout(() => {
    document.getElementById("ui-name-display").textContent = document.getElementById("inp-name").value;
    btn.innerHTML = original;
    showToast("Profile updated successfully");
  }, 1000);
}

function confirmDelete() {
  if (confirm("Are you sure?")) showToast("Account deletion simulated", "error");
}

function logout() {
  window.location.href = "login.html"; // Simulate redirect
}

// Init
document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
loadDashboard();

</script>
</body>
</html>
